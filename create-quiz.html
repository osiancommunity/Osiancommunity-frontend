<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSIAN - Create New Quiz</title>
    <link rel="stylesheet" href="style-admin.css"> 
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>

    <div class="admin-container">

        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="dashboard-admin.html" class="logo">OSIAN</a>
                <span class="logo-tag">Admin</span>
            </div>
            <ul class="sidebar-menu">
                <li><a href="dashboard-admin.html" ><i class='bx bxs-dashboard'></i><span>Dashboard</span></a></li>
               <li class="active"><a href="create-quiz.html" class="active"><i class='bx bxs-file-plus'></i><span>Create New Quiz</span></a></li>
                <li><a href="my-quizzes.html"><i class='bx bxs-file-blank'></i><span>My Quizzes</span></a></li>
                <li><a href="quiz-results.html"><i class='bx bxs-bar-chart-alt-2'></i><span>Quiz Results</span></a></li>
                <li><a href="profile-admin.html"><i class='bx bxs-user'></i><span>My Profile</span></a></li>
             </ul>
            <div class="sidebar-footer">
                <a href="login.html" class="logout-btn">
                    <i class='bx bx-log-out'></i><span>Log Out</span>
                </a>
            </div>
        </aside>
        <main class="main-content">
            
            <header class="main-header">
                <div class="header-title">
                    <h1>Create a New Quiz</h1>
                    <p>Fill in the details to build and launch your quiz.</p>
                    <span id="autosave-indicator" title="Drafts are autosaved">Draft saved</span>
                    <button id="set-backend-btn" class="btn-secondary" style="margin-left:10px;">Set Backend URL</button>
                </div>
                <div class="header-profile">
                    <img src="https://via.placeholder.com/40" alt="Admin Profile Picture">
                    <span>Admin User</span>
                </div>
            </header>

            <form id="create-quiz-form" class="create-quiz-page">
                <div class="content-card">
                    <h3>Quiz Details</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="quiz-title">Quiz Title</label>
                            <input type="text" id="quiz-title" placeholder="e.g., Technical Quiz #009" required>
                        </div>
                        <div class="form-group">
                            <label for="quiz-category">Quiz Category / Field</label>
                            <select id="quiz-category" title="Select a quiz category" required>
                                <option value="" disabled selected>Select a category</option>
                                <option value="technical">Technical</option>
                                <option value="law">Law</option>
                                <option value="engineering">Engineering</option>
                                <option value="gk">General Knowledge</option>
                                <option value="sports">Sports</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quiz-field">Field</label>
                            <select id="quiz-field" title="Select a field/sub-category" required>
                                <option value="" disabled selected>Select a field</option>
                            </select>
                            <small>Options update based on selected category</small>
                        </div>
                        <div class="form-group">
                            <label for="quiz-difficulty">Difficulty</label>
                            <select id="quiz-difficulty" title="Select difficulty" required>
                                <option value="basic">Basic</option>
                                <option value="medium">Medium</option>
                                <option value="hard">Hard</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quiz-type">Quiz Type</label>
                            <select id="quiz-type" title="Select a quiz type" required>
                                <option value="regular">Regular</option>
                                <option value="live">Live Quiz</option>
                                <option value="upcoming">Upcoming Quiz</option>
                                <option value="paid">Paid Quiz</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quiz-visibility">Quiz Visibility</label>
                            <select id="quiz-visibility" title="Select quiz visibility" required>
                                <option value="public">Public</option>
                                <option value="private">Private</option>
                                <option value="unlisted">Unlisted</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quiz-duration">Duration (in minutes)</label>
                            <input type="number" id="quiz-duration" placeholder="e.g., 30" required>
                        </div>
                        <div class="form-group">
                            <label for="quiz-limit">Registration Limit</label>
                            <input type="number" id="quiz-limit" placeholder="e.g., 500 (0 for unlimited)">
                        </div>
                        <div class="form-group">
                            <label for="quiz-schedule">Schedule Time (Optional)</label>
                            <input type="datetime-local" id="quiz-schedule" placeholder="Select start time">
                            <small>Leave empty for immediate availability</small>
                        </div>
                        <div class="form-group" id="quiz-price-group">
                            <label for="quiz-price">Quiz Price (in ₹)</label>
                            <input type="number" id="quiz-price" placeholder="e.g., 5.00">
                        </div>
                        <div class="form-group">
                            <label for="quiz-cover">Quiz Cover Image</label>
                            <input type="file" id="quiz-cover" accept="image/*" required>
                            <small>Image will be automatically converted to 16:9 aspect ratio</small>
                        </div>
                        <div class="form-group">
                            <label for="bulk-upload">Bulk Upload Questions (CSV/Excel)</label>
                            <input type="file" id="bulk-upload" accept=".csv,.xlsx" title="Upload CSV/XLSX to auto-generate questions">
                            <small>Use CSV/XLSX with columns: type, text, isMultiple, options(;), correctIndices(,), marks, explanation</small>
                        </div>
                        <div class="form-group">
                            <label for="num-questions">Number of questions to show</label>
                            <input type="number" id="num-questions" placeholder="e.g., 10">
                            <small>Leave blank to show all uploaded questions</small>
                        </div>
                        <div class="form-group">
                            <label>Randomization</label>
                            <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                                <label><input type="checkbox" id="randomize-questions"> Randomize question order</label>
                                <label><input type="checkbox" id="randomize-options"> Randomize option order</label>
                            </div>
                            <small>Questions can be randomized per user attempt</small>
                        </div>
                    </div>
                </div>

                <div class="content-card">
                    <h3>Quiz Questions <small id="questions-count" style="font-weight:500; color: var(--text-light);"></small></h3>
                    <div id="questions-container">
                        <div class="question-block" draggable="true">
                            <div class="question-card-header">
                                <span class="drag-handle" title="Drag to reorder">⋮⋮</span>
                                <h4>Question 1</h4>
                                <div class="question-card-actions">
                                    <button type="button" class="btn-action btn-preview">Preview</button>
                                    <button type="button" class="btn-action btn-duplicate">Duplicate</button>
                                    <button type="button" class="btn-action btn-collapse">Collapse</button>
                                    <button type="button" class="btn-remove-question">Remove</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Question Type</label>
                                <select class="question-type" required>
                                    <option value="mcq">Multiple Choice Question (MCQ)</option>
                                    <option value="written">Written Question</option>
                                    <option value="coding">Coding Question</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Question Text</label>
                                <textarea class="question-text" placeholder="Enter the question here..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label>Question Image (optional)</label>
                                <input type="file" class="question-image" accept="image/*">
                            </div>
                            <div class="form-group">
                                <label>Explanation (optional)</label>
                                <textarea class="question-explanation" placeholder="Add explanation or solution..."></textarea>
                            </div>
                            <div class="form-group">
                                <label><input type="checkbox" class="is-timed"> Timed question</label>
                                <input type="number" class="time-limit" placeholder="Time limit (seconds)" min="5" style="margin-top:8px;">
                            </div>
                            <div class="mcq-only">
                                <div class="form-group" style="margin-bottom:10px;">
                                    <label><input type="checkbox" class="is-multiple"> Allow multiple correct answers</label>
                                </div>
                                <div class="options-container options-grid"></div>
                                <button type="button" class="btn-action add-option-btn"><i class='bx bx-plus'></i> Add Option</button>
                            </div>
                            <div class="form-group coding-only" style="display:none;">
                                <label>Programming Language</label>
                                <select class="code-language">
                                    <option value="javascript">JavaScript</option>
                                    <option value="python">Python</option>
                                    <option value="java">Java</option>
                                    <option value="cpp">C++</option>
                                </select>
                            </div>
                            <div class="form-group coding-only" style="display:none;">
                                <label>Starter Code (optional)</label>
                                <textarea class="code-starter" placeholder="Provide starter template or function signature..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>Marks</label>
                                <input type="number" class="question-marks" placeholder="e.g., 5" min="1" required>
                            </div>
                        </div>
                        </div>
                    <button type="button" id="add-question-btn" class="btn-action">
                        <i class='bx bx-plus'></i> Add Another Question
                    </button>
                </div>

                <button type="submit" class="btn-create btn-submit">
                    Create Quiz
                </button>
            </form>

        </main>
    </div>

    <script src="script-toast-helper.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="script-create-quiz.js"></script>

    <div id="preview-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Question Preview</h3>
            <div id="preview-content"></div>
            <div class="modal-actions">
                <button class="btn-secondary" id="close-preview">Close</button>
            </div>
        </div>
    </div>
</body>
</html>
